{
  "$schema": "https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainer.schema.json",

  "name": "Press0 Dev Environment",
  "image": "mcr.microsoft.com/devcontainers/base:ubuntu-24.04",

  "features": {
    // Google Cloud CLI Feature (3rd-party allowed)
    "ghcr.io/dhoeric/features/google-cloud-cli:1.0.1": {
      "version": "latest"
    },

    // Node Feature (Spec v1-compliant), replaces node + npm-package
    "ghcr.io/devcontainers/features/node:1": {
      "version": "lts"
    },

    // Java 17 for Firebase Emulator Suite
    "ghcr.io/devcontainers/features/java:1": {
      "version": "17"
    },

    "ghcr.io/devcontainers/features/sshd:1": {
        "version": "latest"
    }

  },

  "onCreateCommand": "git config --global pull.rebase true && npm install -g firebase-tools npm-check-updates",
  // Run after container is created and features are applied
  "postCreateCommand": "cd extension/functions && npm install --no-fund --no-audit",
}
